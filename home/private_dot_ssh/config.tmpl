# Enable persistent connection multiplexing

Host *
  ControlMaster auto
  ControlPath ~/.ssh/cm_%r@%h:%p
  ControlPersist 10800
  ServerAliveInterval 120

{{ if .work -}}
Host vmax vm
  HostName vmax.c.googlers.com
{{- end }}

Host home
  Hostname {{.home_dns_alias}}
  User max
  LocalForward 5900 127.0.0.1:5900
  ForwardAgent yes
  IdentityAgent "{{.chezmoi.homeDir}}/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"

{{ if .chrugi_domain -}}
Host sv
  HostName sv.lan.{{.chrugi_domain}}
  User max
  ProxyJump home
  IdentityAgent "{{.chezmoi.homeDir}}/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"
{{- end }}

Host macmini
  HostName macmini
  User max

Host m4
  HostName 192.168.99.195
  User max
