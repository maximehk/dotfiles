set -Ux fish_greeting ""
function fish_greeting
    fastfetch
end

fish_config theme choose Dracula

fish_add_path /opt/homebrew/bin
fish_add_path $HOME/.local/bin

# bind \t accept-autosuggestion
bind \eL 'ls -l\n'
# bind \cL 'ls -l\n'
bind alt-e edit_command_buffer


function starship_transient_prompt_func
  starship module character
end
starship init fish | source
enable_transience

fzf --fish | source
zoxide init --cmd cd fish | source

for f in $HOME/.profile.d/google/*sh
    # Check if 'f' is a regular file before sourcing
    if test -f "$f"
        source "$f"
    end
end

# Core Editor Settings
set -Ux VISUAL nvim
set -Ux EDITOR nvim

function fish_upgrade_editor
  set -Ux VISUAL code --wait
end

# Locale settings
set -Ux LANG en_US.UTF-8
set -Ux PAGER less
set -Ux LESS "-R --quit-if-one-screen"

# Homebrew Analytics Opt-out
set -Ux HOMEBREW_NO_ANALYTICS 1
set -Ux HOMEBREW_AUTO_UPDATE_SECS 86400

{{ if .use_1password -}}
function knock
  eval $(op read "op://Private/knock_function/one_liner")
end
{{- end }}

# Fish abbreviations
# Abbreviations for GIT
abbr --add g   git
abbr --add ga  git add -A
abbr --add gb  git branch
abbr --add gc  git commit -m
abbr --add gs  git status
abbr --add gl  git log --oneline --graph --decorate
abbr --add gp  git push
abbr --add gpl git pull
abbr --add gco git checkout

# Abbreviations for ChezMoi
abbr --add cm   chezmoi
abbr --add cma  chezmoi apply
abbr --add cmu  chezmoi update -a
abbr --add cme chezmoi edit -a

{{- if not .work }}
abbr --add dc docker compose
abbr --add dcup docker compose up -d
{{- end }}

abbr --add v vim
alias vim='nvim'

abbr --add tmx 'tmux new-session -A -t'

abbr --add j just

abbr --add rl readlink -f
abbr --add ss ssh

